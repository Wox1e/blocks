<!DOCTYPE html>
{% extends "main/base.html" %}
{% load static %}
{% load get_commentaries %}

{% block title %}
    <title>{{title}}</title>
{% endblock title %}


{% block content %}
        <!---------------------------------------Middle columns  start---------------->

    <link rel="stylesheet" href="{% static "main/style.css" %}">

    <form class = "message_input" metod = "GET" action = "{% url "posts:post" %}">
                
        <div class="col-28 col-lg-16" >


            <div class="middle-column">


                <div class="card" >


                    <div class="card-header bg-transparent">
                        <form class="form-inline">


                            <div class="input-group w-100">
                            <input type="text" name="message" id="message" placeholder="Message" class="form-control form-control-md">

                            <div class="input-group-append">
                                    <div class="input-group-text">
                                            <i class="fas fa-camera"></i>
                                        </div>


                            </div>

                            </div>



                    
                            
                        
                        </form>

                    </div>

    </form>




{% if has_posts %}                           
    {% for post in posts %}

    <div class="card-body">

        <div class="media">
            <img src="{{post.user.image}}" alt="img" width="55px" height="55px" class="rounded-circle mr-3">

        <div class="media-body">
                <h5 class = "username_text">{{post.user.username}}</h5>
                <p class="text-justify">{{post.text}}</p>
                


                
            {% comment %} commentaries {% endcomment %}
            {% get_commentaries post as commentaries %}
            <p class = "commentaries">
                {% for commentary in commentaries %}
                    <div class="media">
                        <img src="{{commentary.user.image}}" alt="img" width="25px" height="25px" class="rounded-circle mr-2">
                        <div class="media-body">
                                <p class="card-text text-justify">{{commentary.user.username}}: {{commentary.text}}</p>

                        </div>


                    </div>
                {% endfor %}
            </p>    
            {% comment %} commentaries {% endcomment %}

           


            <form class = "commentary_input" metod = "GET" action = "{% url "posts:commentary" %}">
                <input type="text" name="message" id="message" placeholder="Commentary" class="form-control form-control-md">
                <input type="hidden" name="post_id" value="{{post.id}}">
            </form>


        </div>

        <small>{{post.posting_time}}</small>

        </div>





        </div>
        <hr>

    {% endfor %}
{% else %}
<p>Постов нет<p>
{% endif %} 


    </div>





                
                    

    </div>









    </div>








    </div>













    <br> <br> <br><br> <br> <br>

{% endblock content %}