{% extends "main/base.html" %}
{% load static %}
{% load get_commentaries %}
{% load get_time_difference %}




{% block content %}
	<!--Navbar-->
	<nav class="navbar navbar-fixed navbar-dark info-color">
    </div>
    </div>
	</nav>
	<!--/.Navbar-->

	<main>

		<div class="container">
			<div class="row m-b-r m-t-3">

				
				<div class="col-md-2 offset-md-1">
					<img src="{{user.image}}" alt="" class="img-circle img-fluid">
				</div>

				<div class="col-md-9 p-t-2">
					<h2 class="h2-responsive">@{{user.username}} <button type="button" class="btn btn-info-outline waves-effect">Follow</button></h2>
					<p>{{user.first_name}} {{user.last_name}}</p>

					<ul class="flex-menu">
						<li><strong>41</strong> posts</li>
						<li><strong>47k</strong> followers</li>
						<li><strong>208</strong> following</li>
					</ul>
				</div>

			</div>
		


		{% comment %} END BIO {% endcomment %}

		{% if has_posts %}                           
		{% for post in posts %}
	
		<div class="card-body">
	
			<div class="media">
				<img src="{{post.user.image}}" alt="img" width="55px" height="55px" class="rounded-circle mr-3">
	
			<div class="media-body">
					<a href="{% url "user:profile" post.user.username %}" class = "username_text">{{post.user.username}}</a>
					<p class="text-justify">{{post.text}}</p>
					
	
	
					
				{% comment %} commentaries {% endcomment %}
				{% get_commentaries post as commentaries %}
				<p class = "commentaries">
					{% for commentary in commentaries %}
						<div class="media">
							<img src="{{commentary.user.image}}" alt="img" width="25px" height="25px" class="rounded-circle mr-2">
							<div class="media-body">
									<p class="card-text text-justify">{{commentary.user.username}}: {{commentary.text}}</p>
	
							</div>
	
	
						</div>
					{% endfor %}
				</p>    
				{% comment %} commentaries {% endcomment %}
	
			   
	
	
				<form class = "commentary_input" metod = "GET" action = "{% url "posts:commentary" %}">
					<input type="text" name="message" id="message" placeholder="Commentary" class="form-control form-control-md">
					<input type="hidden" name="post_id" value="{{post.id}}">
				</form>
	
	
			</div>
	
			<small>{%get_time_difference post.posting_time%}</small>
	
			</div>
	
	
	
	
	
			</div>
			<hr>
	
		{% endfor %}
	{% else %}
	<p>Постов нет<p>
	{% endif %} 



{% endblock content %}

